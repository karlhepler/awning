# ==============================================================================
# Bond Bridge Configuration
# ==============================================================================

# Get BOND_TOKEN from Bond Home app → Settings → Advanced Settings
BOND_TOKEN=your_bond_token_here

# ==============================================================================
# IMPORTANT: Bond Bridge IP Address
# ==============================================================================
# Your Bond Bridge requires a stable IP address. We STRONGLY recommend setting
# up a DHCP reservation in your router. This is best practice for ALL IoT
# devices - it ensures the IP never changes even after router reboots.
#
# How to set up a DHCP reservation:
# 1. Find your Bond Bridge's MAC address in Bond Home app → Settings
# 2. Log into your router's admin panel (usually 192.168.1.1 or 192.168.0.1)
# 3. Look for "DHCP Reservation", "Static DHCP", or "Address Reservation"
# 4. Create a reservation binding the Bond's MAC address to a fixed IP
#
# To find your Bond Bridge's current IP:
# - Check your router's connected devices list, or
# - Use the Bond Home app → Settings → Device Info
# ==============================================================================
BOND_HOST=192.168.1.XXX

# Device ID for your awning
# Find in Bond Home app → Select Device → Settings → Advanced
DEVICE_ID=your_device_id_here

# ==============================================================================
# Weather Automation Configuration
# ==============================================================================
# The automation opens the awning ONLY if ALL 5 conditions are met:
#   1. ✓ Sunny (cloud cover below threshold)
#   2. ✓ Calm (wind speed below threshold)
#   3. ✓ No rain (precipitation = 0 mm/h)
#   4. ✓ Daytime (current time between sunrise and sunset)
#   5. ✓ Sun facing SE (sun azimuth 90°-180° for southeast-facing window)
#
# If ANY condition fails, the awning will close.
# ==============================================================================

# Location - Used for weather data AND sun position calculation
# Find your coordinates at https://www.latlong.net/ or Google Maps (right-click → coordinates)
LATITUDE=37.7749
LONGITUDE=-122.4194

# Cloud cover threshold (0-100%) - Controls "Sunny" condition
# Awning opens if cloud cover is BELOW this percentage
# Typical values: 20-40% (30% is a good default for mostly sunny)
CLOUD_COVER_THRESHOLD=30

# Wind speed threshold (mph) - Controls "Calm" condition
# Awning opens if wind speed is BELOW this speed
# IMPORTANT: Set conservatively below your awning's built-in wind sensor (typically 30 mph)
# Typical values: 8-12 mph (10 mph is a safe default for most residential awnings)
WIND_SPEED_THRESHOLD_MPH=10

# Rain threshold - Hardcoded to 0 mm/h (any precipitation closes awning)
# This cannot be configured - any rain detection will close the awning

# Daytime - Automatically determined from sunrise/sunset times
# No configuration needed - uses weather API data for your location

# Sun position - Hardcoded to 90°-180° azimuth range
# This is for a southeast-facing window (sun shines from East to South)
# East = 90°, Southeast = 135°, South = 180°
# If your window faces a different direction, you'll need to modify the code

# ==============================================================================
# Cron Job Setup Example
# ==============================================================================
# First, create a logs directory: mkdir -p ~/logs
#
# Then add to your crontab (crontab -e):
#
# Option 1: Specify .env file path explicitly (RECOMMENDED for cron)
# */15 * * * * nix run /Users/YOUR_USERNAME/path/to/awning#automation -- --env-file=/Users/YOUR_USERNAME/path/to/awning/.env >> ~/logs/awning-automation.log 2>&1
#
# Option 2: Change to project directory (auto-finds .env in current directory)
# */15 * * * * cd /Users/YOUR_USERNAME/path/to/awning && nix run .#automation >> ~/logs/awning-automation.log 2>&1
#
# The automation will only open the awning when ALL conditions are met.
# It checks the current awning state before taking action, so it won't
# repeatedly send open/close commands if the awning is already in the desired state.
